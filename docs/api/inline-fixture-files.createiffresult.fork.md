<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@mizdra/inline-fixture-files](./inline-fixture-files.md) &gt; [CreateIFFResult](./inline-fixture-files.createiffresult.md) &gt; [fork](./inline-fixture-files.createiffresult.fork.md)

## CreateIFFResult.fork() method

Change the root directory and take over the fixture you created.

**Signature:**

```typescript
fork<const U extends Directory>(additionalDirectory: U, options: CreateIFFOptions): Promise<CreateIFFResult<Paths & FlattenDirectory<U>>>;
```

## Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  additionalDirectory | U | The definition of fixtures to be added. |
|  options | [CreateIFFOptions](./inline-fixture-files.createiffoptions.md) | The options for creating fixtures. |

**Returns:**

Promise&lt;[CreateIFFResult](./inline-fixture-files.createiffresult.md)<!-- -->&lt;Paths &amp; FlattenDirectory&lt;U&gt;&gt;&gt;

## Remarks

Internally, first a new root directory is created, and then the fixtures from the old root directory are copied into it. Finally, the fixtures specified in `additionalDirectory` are added to the new root directory.

The copy operation will attempt to create a copy-on-write reflink. If the platform does not support copy-on-write, then a fallback copy mechanism is used.

## Example


```ts
const baseIff = await createIFF({
  'a.txt': 'a',
  'b/a.txt': 'b-a',
  },
}, { rootDir: baseRootDir });
const forkedIff = await baseIff.fork({
  'b/b.txt': 'b-b',
  'c.txt': 'c',
}, { rootDir: forkedRootDir });

// `forkedIff` inherits fixtures from `baseIff`.
expect(await readFile(join(forkedRootDir, 'a.txt'), 'utf-8')).toBe('a');
expect(await readFile(join(forkedRootDir, 'b/a.txt'), 'utf-8')).toBe('b-a');
expect(await readFile(join(forkedRootDir, 'b/b.txt'), 'utf-8')).toBe('b-b');
expect(await readFile(join(forkedRootDir, 'c.txt'), 'utf-8')).toBe('c');

// The `baseIff` fixtures are left in place.
expect(await readFile(join(baseRootDir, 'a.txt'), 'utf-8')).toBe('a');
expect(await readFile(join(baseRootDir, 'b/a.txt'), 'utf-8')).toBe('b-a');
```

